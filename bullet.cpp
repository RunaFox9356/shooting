//=============================================================================
//
// Object
// Author : 浜田琉雅
//
//=============================================================================

#include "object.h"
#include "bullet.h"
#include "manager.h"
#include "input.h"


LPDIRECT3DTEXTURE9	bullet::m_pTexture;
//=============================================================================
// コンストラクト関数
//=============================================================================
bullet::bullet()
{

}
//=============================================================================
// デストラクト関数
//=============================================================================
bullet::~bullet()
{

}
//=============================================================================
// ポリゴンの初期化
//=============================================================================
HRESULT bullet::Init()
{
	CObject2d::Init();

	CObject2d::SetTexture(CTexture::TEXTURE_KEN);

	return S_OK;
}

//=============================================================================
// ポリゴンの終了
//=============================================================================
void bullet::Uninit()
{
	CObject2d::Uninit();


}

//=============================================================================
// ポリゴンの更新
//=============================================================================
void bullet::Update()
{
	CObject2d::Update();
	m_pos += m_move;
	if (m_pos.y >SCREEN_HEIGHT)
	{
		CObject::release();
	}

}

//=============================================================================
// ポリゴンの描画
//=============================================================================
void bullet::Draw()
{
	CObject2d::Draw();
}

//=============================================================================
// create関数
//=============================================================================
bullet *bullet::Create(D3DXVECTOR3 pos ,D3DXVECTOR3 move)
{
	bullet * pObject = nullptr;
	pObject = new bullet;

	if (pObject != nullptr)
	{
		pObject->SetMove(move);
		pObject->SetPos(pos);
		pObject->Init();
	}

	return pObject;
}
//=============================================================================
// Setmove関数
//=============================================================================
void bullet::SetMove(D3DXVECTOR3 move)
{
	m_move = move;
}
//=============================================================================
// Setmove関数
//=============================================================================
void bullet::Lood()
{
	LPDIRECT3DDEVICE9 pDevice = CManeager::GetRenderer()->GetDevice();	//デバイスの取得

	//テクスチャ
	D3DXCreateTextureFromFile(pDevice,
		"data\\TEXTURE\\ken.png",
		&m_pTexture);
}
//=============================================================================
// Setmove関数
//=============================================================================
void bullet::UnLood()
{
	// 破棄
	if (m_pTexture != nullptr)
	{
		m_pTexture->Release();
		m_pTexture = nullptr;
	}

}

LPDIRECT3DTEXTURE9 bullet::Gettex()
{
	return m_pTexture;
}